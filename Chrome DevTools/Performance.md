当我们接受一个性能优化任务的时候，我们改从什么地方入手去优化，是最重要的。现阶段前端有很多性能评估功能和指标，DevTools也可以收集不少。这些指标可以帮助我们确定项目性能瓶颈和提供一些优化方案。

## 整体性能评估

如果是全终端，不同设备、网络下的项目整体性能数据的收集是无法通过DevTools来获取到，要用公司的数据平台统计，比如统计一周当中首屏加载时间0-3s部分的占比。可以用DevTools收集到的数据和指标主要是针对某个网络场景，终端下当个页面的场景。

常用的可以通过devTools的networks，performance,，audits（lighthouse）等途径去收集。

### 资源数据
最基础的数据，这部分可以通过Network面板获取
- 容量
- 数量

### 首次时间

里程碑式的数据，从页面加载到首屏完全加载中的各个节点的数据，这部分可以通过lighthouse获取，在lighthouse的performance栏目下有统计到，当然也可以在Performance面板上看到这些指标线，但是这些指标线难以看出具体值

- FCP 页面一次有节点绘制
- FMP 页面第一次将首屏框架加载完成，剩下一些图片视频之类的资源还没加载
- First CPU Idle 首次CPU出现空闲
- Time to interactive 用户可交互时间

### 渲染指标 

这部分指标，需要再Lighthouse和Performance面板中获取，CPU的使用智能看个大概，没有具体的数值。页面刷新帧率可以通过Rendering Drawer获取，Layer数要在Layer面板下获取

- Speed Index 响应速度指标，一般这个值越低越好
- Start Render 开始渲染时间
- CPU使用率
- 内存消耗占比
- 页面刷新帧率
- 页面节点数（页面layer数）

### 项目自定义指标

项目保存时间等是项目的特殊业务场景，要想获取这些时间，可以在项目中调用console.startTime();和console.time()计算，在Console面板中获取

- 保存（生成）时间
- 关键业务调用时间

最终加上公司统计平台的数据，构成一份完成的性能数据分析，就可以知道项目在哪里范畴存在性能问题。接下来就是根据分析出来的问题，做具体的业务分析，找出导致性能问题的地方，做性能优化。

## 优化手段

### 静态资源优化【体积优化】
- 服务端是否可以做压缩，比如做gzip
- 图片大小是否可以压缩，比如压缩成200*200、1000*1000就可以满足业务需要
- 图片是否可以做格式上的压缩，比如转换成webp格式。
- 字体是否可以做裁剪
- JS，CSS的利用率是否高

### 静态资源优化【加载优化】

- 图片是否可以在按需加载（懒加载）
- 图标是否合并成雪碧图
- 非关键业务是否可以按需加载
- 外部资源的加载是否阻碍了页面的渲染
- 使用可以使用本地缓存
- 服务器是否有做相应的加载优化，比如CDN，缓存等

### 渲染优化
- 是否存在与当前交互无关的逻辑，存在性能浪费
- 是否可以删除无用层级
- 是否可以采用GPU做渲染
- 避免节点重构（reflow）
- 是否可以做防抖或者节流
- 是否可以优化渲染体验

列举几种可以优化的可能，当然远不止这么多，体积优化相关的我们可以在Network面板上做判断，在header上看是否有压缩，通过业务和当前加载的资源看看是否存在请求浪费等情况，是否需要做按需加载。通过Rendering看是否存在不合理的节点重构和重绘，判断是否存在无用的层级或者过大的层级等等。

以上就是性能优化相关章节

到此前端浏览器调试相关的内容完结